Title: –ó–∞–ø—É—Å–∫ Git-—Ö—É–∫–æ–≤ –ø—Ä–∏ –ø–æ–º–æ—â–∏ pre-commit
Tags: python, pre-commit, git
Summary: Git-—Ö—É–∫–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—É—Å–∫ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ (–ª–∏–Ω—Ç–µ—Ä—ã, —Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä—ã, —Ç–µ—Å—Ç—ã) –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å —Å–∏—Å—Ç–µ–º–æ–π –∫–æ–Ω—Ç—Ä–æ–ª—è –≤–µ—Ä—Å–∏–π.
Header_cover: /static/hook.jpg
Status: published

# Git-—Ö—É–∫–∏

–£–º–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Å–∏—Å—Ç–µ–º–æ–π –∫–æ–Ω—Ç—Ä–æ–ª—è –≤–µ—Ä—Å–∏–π Git ‚Äî –±–∞–∑–æ–≤—ã–π –Ω–∞–≤—ã–∫ –¥–ª—è –≤—ã–∂–∏–≤–∞–Ω–∏—è
—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ (–Ω–∞ –ª—é–±–æ–º —è–∑—ã–∫–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è) –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä–µ–∞–ª–∏—è—Ö.
–°–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ç—Ä–æ–ª—è –≤–µ—Ä—Å–∏–π ‚Äî —ç—Ç–æ —ç—Ç–∞–∫–∞—è –º–∞—à–∏–Ω–∞ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞:
–≤—Å–µ–≥–¥–∞ –º–æ–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –ª—é–±–æ–µ –ø—Ä–æ—à–ª–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞, –ø–æ–Ω—è—Ç—å
–∫–æ–≥–¥–∞, –∫–∞–∫, —á—Ç–æ –∏ –∫–µ–º –º–µ–Ω—è–ª–æ—Å—å.

_–ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π —Ñ–∞–∫—Ç:_ —Å–æ–≥–ª–∞—Å–Ω–æ
[Google Trends](https://trends.google.com/trends/explore?date=all&q=%2Fm%2F05vqwg,%2Fm%2F012ct9,%2Fm%2F08441_,%2Fm%2F08w6d6,%2Fm%2F09d6g&hl=en-US&tz=&tz=),
–≤–æ –≤—Å—ë–º –º–∏—Ä–µ Git —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –≤—ã—Ç–µ—Å–Ω–∏–ª –¥—Ä—É–≥–∏–µ —Å–∏—Å—Ç–µ–º—ã –∫–æ–Ω—Ç—Ä–æ–ª—è –≤–µ—Ä—Å–∏–π.
–¢–æ–ª—å–∫–æ –≤ –ö–∏—Ç–∞–µ –ø–æ—á–µ–º—É-—Ç–æ –¥–æ —Å–∏—Ö –ø–æ—Ä –ø–æ–ø—É–ª—è—Ä–µ–Ω Subversion (46% —Ä—ã–Ω–∫–∞).
–ö —á–µ–º—É –±—ã —ç—Ç–æ?

Git –∏–º–µ–µ—Ç –∫—Ä–∞–π–Ω–µ –ø–æ–ª–µ–∑–Ω—É—é —Ñ–∏—á—É ‚Äî –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª–Ω—è—Ç—å –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π –∫–æ–¥
–Ω–∞ –º–Ω–æ–≥–∏—Ö —ç—Ç–∞–ø–∞—Ö —Ä–∞–±–æ—Ç—ã —á–µ—Ä–µ–∑ —Ç–∞–∫ –Ω–∞–∑—ã–≤–∞–µ–º—ã–µ —Ö—É–∫–∏.
–í–æ—Ç –ø—Ä–∏–º–µ—Ä—ã –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ö—É–∫–æ–≤:

* `pre-commit` ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –∫–æ–º–º–∏—Ç–∞;
* `commit-msg` ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è –∫–æ–º–º–∏—Ç–∞;
* `post-checkout` ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–µ—Ç–∫–∏;
* `pre-push` ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π –ª–æ–∫–∞–ª—å–Ω–æ–π –∏—Å—Ç–æ—Ä–∏–∏ –Ω–∞ —É–¥–∞–ª—ë–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä.

–ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Ö—É–∫–æ–≤ –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å
[–≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏](https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks).

–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç? –†–∞—Å—Å–º–æ—Ç—Ä–∏–º, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Å—Ö–µ–º—É —Ä–∞–±–æ—Ç—ã —Ö—É–∫–∞ `pre-commit`:

1. –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–∏—à–µ—Ç –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ `git commit -v`;
2. `git` –ø—ã—Ç–∞–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Ö—É–∫ `pre-commit` –ª–æ–∫–∞–ª—å–Ω–æ, –Ω–∞ –º–∞—à–∏–Ω–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞;
3. –µ—Å–ª–∏ —Ö—É–∫ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –æ—à–∏–±–∫–æ–π, —Ç–æ –æ–ø–µ—Ä–∞—Ü–∏—è –∫–æ–º–º–∏—Ç–∞ –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç—Å—è;
4. –µ—Å–ª–∏ —Ö—É–∫ –≤—ã–ø–æ–ª–Ω–∏–ª—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫, —Ç–æ –æ–ø–µ—Ä–∞—Ü–∏—è –∫–æ–º–º–∏—Ç–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è,
–æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä –¥–ª—è –≤–≤–æ–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏—è.

–§–∏—à–∫–∞ –≤ —Ç–æ–º, —á—Ç–æ —Ö—É–∫–∏ –º–æ–≥—É—Ç –ø—Ä–µ—Ä—ã–≤–∞—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏, –∑–∞ –∫–æ—Ç–æ—Ä—ã–µ –æ–Ω–∏ –æ—Ç–≤–µ—á–∞—é—Ç,
–µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –∏–¥—ë—Ç –Ω–µ —Ç–∞–∫. –≠—Ç–æ –∏–¥–µ–∞–ª—å–Ω–æ–µ –º–µ—Å—Ç–æ, —á—Ç–æ–±—ã –∑–∞–ø—É—Å–∫–∞—Ç—å –∫–∞–∫–∏–µ-–Ω–∏–±—É–¥—å
–ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ª–∏–Ω—Ç–µ—Ä—ã, —Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä—ã –∏–ª–∏ —Ç–µ—Å—Ç—ã
(–µ—Å–ª–∏ –æ–Ω–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –±—ã—Å—Ç—Ä–æ, –∫–æ–Ω–µ—á–Ω–æ), –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–æ–º–º–∏—Ç–∞ –Ω–∞
—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∫–æ–Ω–≤–µ–Ω—Ü–∏—è–º –∏–ª–∏ –Ω–∞ –≥—Ä–∞–º–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏.


# –ü–∏—à–µ–º Git-—Ö—É–∫ –Ω–∞ `bash`

–î–∞–≤–∞–π—Ç–µ –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –Ω–∞–ø–∏—à–µ–º –ø—Ä–æ—Å—Ç–æ–π —Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤
–∫–∞—á–µ—Å—Ç–≤–µ —Ö—É–∫–∞.

–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ —è –∏—Å–ø–æ–ª—å–∑—É—é Linux.
–ï—Å–ª–∏ –≤—ã –ø–æ–ª—å–∑—É–µ—Ç–µ—Å—å Windows, —Ç–æ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –æ–ø–∏—Å–∞–Ω–Ω—ã–π –≤–µ—â–µ–π –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π —á–µ—Ä–µ–∑ Git Bash, –∫–æ—Ç–æ—Ä—ã–π —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å Git for Windows.
–í–æ–∑–º–æ–∂–Ω–æ, –≤–∞–º —Ç–æ–ª—å–∫–æ –ø—Ä–∏–¥—ë—Ç—Å—è –ø–æ–º–µ–Ω—è—Ç—å –ø—É—Ç—å –¥–æ –≤–∞—à–µ–≥–æ `bash` –≤
[—à–µ–±–∞–Ω–≥–µ](https://ru.wikipedia.org/wiki/%D0%A8%D0%B5%D0%B1%D0%B0%D0%BD%D0%B3_(Unix)),
–∫–∞–∫ –æ–ø–∏—Å–∞–Ω–æ [–≤ –∫–æ–Ω—Ü–µ —ç—Ç–æ–π —Å—Ç–∞—Ç—å–∏](https://www.tygertec.com/git-hooks-practical-uses-windows/).
–ï—Å–ª–∏ –∂–µ –≤—ã —Å–æ–±–µ—Ä—ë—Ç–µ—Å—å –ø–∏—Å–∞—Ç—å –≤ —Ö—É–∫–∞—Ö —á—Ç–æ-—Ç–æ —Å–ª–æ–∂–Ω–æ–µ –∏ —Ç—Ä–µ–±—É—é—â–µ–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –û–°,
—Ç–æ, –≤–æ–∑–º–æ–∂–Ω–æ, —Å—Ç–æ–∏—Ç –≤–º–µ—Å—Ç–æ `bash` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å PowerShell. 

–°–æ–∑–¥–∞–¥–∏–º –ø—É—Å—Ç–æ–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:

```sh
$ git init git_hooks_example
$ cd git_hooks_example/
```

Git —É–∂–µ –∑–∞–±–æ—Ç–ª–∏–≤–æ —Å–æ–∑–¥–∞–ª –¥–ª—è –Ω–∞—Å —à–∞–±–ª–æ–Ω—ã –¥–ª—è –Ω–∞–ø–∏—Å–∞–Ω–∏—è —Ö—É–∫–æ–≤,
–∫–æ—Ç–æ—Ä—ã–µ –ª–µ–∂–∞—Ç –≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π —Å–ª—É–∂–µ–±–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏:

```sh
$ ls -l .git/hooks/
total 56
-rwxr-xr-x. 1 br0ke br0ke  482 May 30 21:36 applypatch-msg.sample*
-rwxr-xr-x. 1 br0ke br0ke  900 May 30 21:36 commit-msg.sample*
-rwxr-xr-x. 1 br0ke br0ke 4655 May 30 21:36 fsmonitor-watchman.sample*
-rwxr-xr-x. 1 br0ke br0ke  193 May 30 21:36 post-update.sample*
-rwxr-xr-x. 1 br0ke br0ke  428 May 30 21:36 pre-applypatch.sample*
-rwxr-xr-x. 1 br0ke br0ke 1647 May 30 21:36 pre-commit.sample*
-rwxr-xr-x. 1 br0ke br0ke  420 May 30 21:36 pre-merge-commit.sample*
-rwxr-xr-x. 1 br0ke br0ke 1496 May 30 21:36 prepare-commit-msg.sample*
-rwxr-xr-x. 1 br0ke br0ke 1352 May 30 21:36 pre-push.sample*
-rwxr-xr-x. 1 br0ke br0ke 4902 May 30 21:36 pre-rebase.sample*
-rwxr-xr-x. 1 br0ke br0ke  548 May 30 21:36 pre-receive.sample*
-rwxr-xr-x. 1 br0ke br0ke 3639 May 30 21:36 update.sample*
```

–ú–æ–∂–Ω–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å —Ñ–∞–π–ª `pre-commit.sample` –≤ `pre-commit`,
–∏ —ç—Ç–æ—Ç —Ö—É–∫ –≤—Å—Ç—É–ø–∏—Ç –≤ —Å–∏–ª—É. –í –º–æ—ë–º —Å–ª—É—á–∞–µ —Ç–∞–º –Ω–∞ `bash` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
–ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–º—ë–Ω —Ñ–∞–π–ª–æ–≤, –∫–æ—Ç–æ—Ä–∞—è –Ω–µ –¥–æ–ø—É—Å—Ç–∏—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ —Å –∏–º–µ–Ω–∞–º–∏,
—Å–æ–¥–µ—Ä–∂–∞—â–∏–º–∏ –Ω–µ-ASCII —Å–∏–º–≤–æ–ª—ã.

–î–∞–≤–∞–π—Ç–µ –Ω–µ –±—É–¥–µ–º —ç—Ç–æ–≥–æ –¥–µ–ª–∞—Ç—å, –∞ –≤–∑–∞–º–µ–Ω –Ω–∞–ø–∏—à–µ–º –ø—Ä–æ—Å—Ç–æ–π —Å–∫—Ä–∏–ø—Ç,
–∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å –≤—Å–µ –Ω—É–∂–Ω—ã–µ –Ω–∞–º [–ª–∏–Ω—Ç–µ—Ä—ã]({filename}python_linters.md)
–∏ [—Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä—ã]({filename}black.md):

```bash
#!/usr/bin/env bash

# –ü–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—ã—Ç–∞–µ—Ç—Å—è –∑–∞–∫–æ–º–º–∏—Ç–∏—Ç—å,
# –∏ –≤—ã–±–∏—Ä–∞–µ–º –∏–∑ –Ω–∏—Ö —Ç–µ, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—Ç—Å—è –Ω–∞ `.py`.
# –í–∑—è—Ç–æ –æ—Ç—Å—é–¥–∞: https://stackoverflow.com/a/3068990/10650942.
CHANGED_PYTHON_FILES=$(git diff --cached --name-only --diff-filter=ACMR | grep ".py\$")

if [ -z "$CHANGED_PYTHON_FILES" ]
then
   echo "No Python files found. No reason to run checks."
   exit 0
fi

# –í–∫–ª—é—á–∞–µ–º —Ä–µ–∂–∏–º, –≤ –∫–æ—Ç–æ—Ä–æ–º –ª—é–±–∞—è –æ—à–∏–±–∫–∞ —Å—Ä–∞–∑—É –∂–µ –∑–∞–≤–µ—Ä—à–∏—Ç –≤–µ—Å—å —Å–∫—Ä–∏–ø—Ç –æ—à–∏–±–∫–æ–π.
set -e

# –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–æ–≤–µ—Ä–∫–∏.
# –ï—Å–ª–∏ —Ö–æ—Ç—è –±—ã –æ–¥–Ω–∞ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è –æ—à–∏–±–∫–æ–π, —Ç–æ –æ–ø–µ—Ä–∞—Ü–∏—è –±—É–¥–µ—Ç –ø—Ä–µ—Ä–≤–∞–Ω–∞.
flake8 $CHANGED_PYTHON_FILES
black --check $CHANGED_PYTHON_FILES

echo "All checks successfully passed."
```

–≠—Ç–æ—Ç —Ñ–∞–π–ª –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–æ—Ö—Ä–∞–Ω—ë–Ω –ø–æ –ø—É—Ç–∏ `.git/hooks/pre-commit`.
–§–∞–π–ª –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º, –∏–Ω–∞—á–µ Git –Ω–µ —Å–º–æ–∂–µ—Ç –µ–≥–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å:

```sh
$ chmod a+x .git/hooks/pre-commit
```

–¢–µ–ø–µ—Ä—å –¥–∞–≤–∞–π—Ç–µ —Å–æ–∑–¥–∞–¥–∏–º –∫–∞–∫–æ–π-–Ω–∏–±—É–¥—å —Ñ–∞–π–ª, –∫–æ—Ç–æ—Ä—ã–π —Ç–æ—á–Ω–æ –Ω–µ –ø—Ä–æ–π–¥–µ—Ç —ç—Ç–∏—Ö
–ø—Ä–æ–≤–µ—Ä–æ–∫. –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –ª–∏—à–Ω–∏–µ –ø—Ä–æ–±–µ–ª—ã —Ä—è–¥–æ–º —Å–æ —Å–∫–æ–±–∫–∞–º–∏,
–∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –ø–æ–Ω—Ä–∞–≤—è—Ç—Å—è `flake8`, –∏ –Ω–∞ –æ–¥–∏–Ω–∞—Ä–Ω—ã–µ –∫–∞–≤—ã—á–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ
–Ω–µ –ø–æ–Ω—Ä–∞–≤—è—Ç—Å—è `black`:

```python
print( 'Hello world!' )
```

–ü–æ–ø—ã—Ç–∞–µ–º—Å—è –µ–≥–æ –∑–∞–∫–æ–º–º–∏—Ç–∏—Ç—å:

```sh
$ git add example.py
$ git commit -v
example.py:1:7: E201 whitespace after '('
example.py:1:22: E202 whitespace before ')'
```

–ù–∞—à —É–º–Ω—ã–π —Ö—É–∫ –≤—ã–ø–æ–ª–Ω–∏–ª—Å—è –∏ –∑–∞–ø—É—Å—Ç–∏–ª `flake8`, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞—à–µ–ª –æ—à–∏–±–∫–∏.
–î–∞–≤–∞–π—Ç–µ —É–¥–∞–ª–∏–º –ª–∏—à–Ω–∏–µ –ø—Ä–æ–±–µ–ª—ã –∏ –ø–æ–ø—ã—Ç–∞–µ–º—Å—è –∑–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –µ—â—ë —Ä–∞–∑:

```sh
$ git add example.py
$ git commit -v
would reformat example.py
Oh no! üí• üíî üí•
1 file would be reformatted.
```

–í —ç—Ç–æ—Ç —Ä–∞–∑ `flake8` –Ω–µ –Ω–∞—à—ë–ª –æ—à–∏–±–æ–∫, –Ω–æ –æ–ø–µ—Ä–∞—Ü–∏—è –≤—Å—ë —Ä–∞–≤–Ω–æ –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å
–æ—à–∏–±–∫–æ–π –∏–∑-–∑–∞ `black`. –î–∞–≤–∞–π—Ç–µ –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —Ñ–∞–π–ª –∏ –Ω–∞–∫–æ–Ω–µ—Ü –∑–∞–∫–æ–º–º–∏—Ç–∏–º –µ–≥–æ:

```sh
$ black .
$ git add example.py
$ git commit -v
```

–ù–∞ —ç—Ç–æ—Ç —Ä–∞–∑ –≤—Å—ë —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —É—Å–ø–µ—à–Ω–æ.

–ß—Ç–æ–±—ã –∑–∞–∫–æ–º–º–∏—Ç–∏—Ç—å, –∏–≥–Ω–æ—Ä–∏—Ä—É—è —Ö—É–∫–∏, –º–æ–∂–Ω–æ –±—ã–ª–æ –ø–µ—Ä–µ–¥–∞—Ç—å –≤
–∫–æ–º–∞–Ω–¥—É —Ñ–ª–∞–≥ `--no-verify` –∏–ª–∏ `-n`:

```sh
git commit -v -n
```

–ö–∞–∫ –≤–∏–¥–∏—Ç–µ, –ø–∏—Å–∞—Ç—å git-—Ö—É–∫–∏ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –Ω–µ —Ç–∞–∫ —É–∂ –∏ —Å–ª–æ–∂–Ω–æ.
–ù–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `bash`, —Ö—É–∫–∏ –º–æ–∂–Ω–æ –ø–∏—Å–∞—Ç—å –Ω–∞ —á—ë–º —É–≥–æ–¥–Ω–æ ‚Äî
–ª—é–±–æ–π –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª –ø–æ–¥–æ–π–¥–µ—Ç, —Ö–æ—Ç—å –Ω–∞ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É–µ–º–æ–º —è–∑—ã–∫–µ,
—Ö–æ—Ç—å –Ω–∞ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ–º–æ–º. –ï—Å–ª–∏ –±—ã –Ω—É–∂–Ω–æ –±—ã–ª–æ –ø–∏—Å–∞—Ç—å –∫–∞–∫—É—é-—Ç–æ –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—É—é –ª–æ–≥–∏–∫—É,
—Ç–æ —è –±—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–µ–¥–ø–æ—á—ë–ª –Ω–∞–ø–∏—Å–∞—Ç—å —Ö—É–∫ –Ω–∞ Python.

–£ —Ç–∞–∫–æ–≥–æ —Ä—É—á–Ω–æ–≥–æ —Å–ø–æ—Å–æ–±–∞ –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–æ–≤:

* —Ö—É–∫ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `.git`, –∫–æ—Ç–æ—Ä–∞—è —è–≤–ª—è–µ—Ç—Å—è —Å–ª—É–∂–µ–±–Ω–æ–π –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π
–∫–æ–ø–∏–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –∏ —Å–∞–º–∞ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ —Å–∏—Å—Ç–µ–º—É –∫–æ–Ω—Ç—Ä–æ–ª—è –≤–µ—Ä—Å–∏–π;
—ç—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –µ—Å–ª–∏ –≤—ã –∑–∞—Ö–æ—Ç–∏—Ç–µ –ø–æ–¥–µ–ª–∏—Ç—å—Å—è —Å–≤–æ–∏–º —Ö—É–∫–æ–º —Å –∫–æ–ª–ª–µ–≥–∞–º–∏,
—Ç–æ –≤—ã –º–æ–∂–µ—Ç–µ –ª–∏—à—å –∫–∞–∫–∏–º-–ª–∏–±–æ –æ–±—Ä–∞–∑–æ–º —Å–∫–∏–Ω—É—Ç—å –∏–º –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥,
–∞ –∏–º –ø—Ä–∏–¥—ë—Ç—Å—è —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –∫–ª–∞—Å—Ç—å –µ–≥–æ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –º–µ—Å—Ç–æ –∏ –Ω–∞–∑–Ω–∞—á–∞—Ç—å –ø—Ä–∞–≤–∞;
* –ø–µ—Ä–≤–∞—è –∫–æ–º–∞–Ω–¥–∞, –∑–∞–≤–µ—Ä—à–∏–≤—à–∞—è—Å—è –æ—à–∏–±–∫–æ–π, –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ö—É–∫–∞ –∏
–ø–æ—Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã –Ω–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è; —ç—Ç–æ –º–æ–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å,
–Ω–æ –ø–æ–ª—É—á–∏—Ç—Å—è —Å–∏–ª—å–Ω–æ —Å–ª–æ–∂–Ω–µ–µ;
* –ª–æ–≥–∏–∫–∞ —Ö—É–∫–∞ –º–æ–∂–µ—Ç –±—ã—Å—Ç—Ä–æ —Å—Ç–∞—Ç—å —Å–ª–æ–∂–Ω–æ–π;
* –≤—Å—ë –Ω—É–∂–Ω–æ –∏–º–ø–ª–µ–º–µ–Ω—Ç–∏—Ç—å —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ;
* –Ω–∞—à —Ö—É–∫ –ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –∫–æ–º–∞–Ω–¥ `flake8` –∏ `black`, —Ç–∞–∫ —á—Ç–æ –æ–Ω–∏
–ª–∏–±–æ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≥–ª–æ–±–∞–ª—å–Ω–æ, –ª–∏–±–æ –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º –Ω—É–∂–Ω–æ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å
–≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞.

# –ò—Å–ø–æ–ª—å–∑—É–µ–º –≥–æ—Ç–æ–≤—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç ‚Äî `pre-commit`

–ö–∞–∫ –æ–±—ã—á–Ω–æ, –¥–ª—è –≤—Å–µ–≥–æ —É–∂–µ –µ—Å—Ç—å —Ä–µ—à–µ–Ω–∏—è. –ü—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é –≤–∞—à–µ–º—É –≤–Ω–∏–º–∞–Ω–∏—é
[`pre-commit`](https://pre-commit.com/) ‚Äî —É–º–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
Git-—Ö—É–∫–∞–º–∏.

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

`pre-commit` –Ω–∞–ø–∏—Å–∞–Ω –Ω–∞ Python (–µ—â—ë –±—ã, –∏–Ω–∞—á–µ –± —è –Ω–µ –±—ã–ª –µ–≥–æ —Ñ–∞–Ω–∞—Ç–æ–º üòÅ),
–ø–æ—ç—Ç–æ–º—É —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –µ–≥–æ –º–æ–∂–Ω–æ —á–µ—Ä–µ–∑ `pip`. –û–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≥–ª–æ–±–∞–ª—å–Ω–æ,
–∞ –Ω–µ –≤ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞, –≥–¥–µ –≤—ã —Å–æ–±–∏—Ä–∞–µ—Ç–µ—Å—å –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å.
–†–µ–∫–æ–º–µ–Ω–¥—É—é –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤ –¥–æ–º–∞—à–Ω—é—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
(—Å–º. [–∑–∞–º–µ—Ç–∫—É –ø—Ä–æ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è]({filename}virtualenv.md)
–∑–∞ –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç—è–º–∏):

```sh
$ pip install --user pre-commit
```

–ü—Ä–æ–≤–µ—Ä–∏–º —É—Å—Ç–∞–Ω–æ–≤–∫—É:

```sh
$ pre-commit --version
pre-commit 2.4.0
```


## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

`pre-commit` —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω —Å –ø—Ä–∏—Ü–µ–ª–æ–º –Ω–∞ —É–¥–æ–±–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö
–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Ö—É–∫–æ–≤, –Ω–æ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª–Ω—è—Ç—å –∏ –≤–æ–æ–±—â–µ –ª—é–±—ã–µ –∫–æ–º–∞–Ω–¥—ã.
[–£–∂–µ –Ω–∞–ø–∏—Å–∞–Ω—ã —Å–æ—Ç–Ω–∏ –ø–æ–ª–µ–∑–Ω—ã—Ö —Ö—É–∫–æ–≤](https://pre-commit.com/hooks.html)
–¥–ª—è —Ä–∞–∑–Ω—ã—Ö —è–∑—ã–∫–æ–≤ –∏ –∑–∞–¥–∞—á, –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö, –∫–∞–∫ –∏–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞, –º–æ–∂–Ω–æ —Å–æ–±—Ä–∞—Ç—å
–ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –ª—é–±–æ–π –Ω—É–∂–Ω—ã–π –≤–∞–º –≤–æ–∫—Ä—Ñ–ª–æ—É. –í—ã–±–∏—Ä–∞–π—Ç–µ —Ç–µ, –∫–æ—Ç–æ—Ä—ã–µ –≤–∞–º –ø–æ–Ω—Ä–∞–≤—è—Ç—Å—è.
–î–ª—è –ø—Ä–∏–º–µ—Ä–∞ —è –≤–æ–∑—å–º—É –≤—Å—ë —Ç–µ –∂–µ `flake8` –∏ `black`, –∏ –µ—â—ë –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥—Ä—É–≥–∏—Ö
—Ö—É–∫–æ–≤ —Å–≤–µ—Ä—Ö—É (–∞ —á—Ç–æ, –±–µ—Å–ø–ª–∞—Ç–Ω–æ –∂–µ).

`pre-commit` –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –ø—Ä–∏ –ø–æ–º–æ—â–∏
[YAML-—Ñ–∞–π–ª–∞](https://ru.wikipedia.org/wiki/YAML).
–§–∞–π–ª –¥–æ–ª–∂–µ–Ω –Ω–∞–∑—ã–≤–∞—Ç—å—Å—è `.pre-commit-config.yaml` –∏ –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –∫–æ—Ä–Ω–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.
–î–∞–≤–∞–π—Ç–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –±–∞–∑–æ–≤—ã–π –∫–æ–Ω—Ñ–∏–≥:

```sh
$ pre-commit sample-config > .pre-commit-config.yaml
```

–ò –¥–æ–ø–∏–ª–∏–º –ø—Ä–∏–º–µ—Ä–Ω–æ –¥–æ —Ç–∞–∫–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è:

```yaml
# See https://pre-commit.com for more information
# See https://pre-commit.com/hooks.html for more hooks
repos:
  - repo: 'https://github.com/pre-commit/pre-commit-hooks'
    rev: v2.4.0
    hooks:
      # –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –ø–µ—Ä–µ–Ω–æ—Å–∞ —Å—Ç—Ä–æ–∫–∏ –≤ –∫–æ–Ω—Ü–µ –≤—Å–µ—Ö —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤
      - id: end-of-file-fixer
      # –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞–µ—Ç –æ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤ –≤ Git
      - id: check-added-large-files
      # –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞–µ—Ç –æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —Ñ–∞–π–ª–æ–≤ —Å UTF-8 BOM
      - id: check-byte-order-marker
      # –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –∫–ª—é—á–µ–π
      - id: detect-private-key
      # –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ —Ñ–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –º—ã —Å–æ–±–∏—Ä–∞–µ–º—Å—è —Å–æ—Ö—Ä–∞–Ω—è—Ç—å, –∫–∞–∫ –º–∏–Ω–∏–º—É–º –≤–∞–ª–∏–¥–Ω—ã–π Python
      - id: check-ast
  - repo: 'https://gitlab.com/pycqa/flake8'
    rev: 3.8.2
    hooks:
      - id: flake8
  - repo: 'https://github.com/psf/black'
    rev: 19.10b0
    hooks:
      - id: black
```

–¢–µ–ø–µ—Ä—å –≤–∫–ª—é—á–∏–º `pre-commit` –≤ —Ç–µ–∫—É—â–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.

```sh
$ pre-commit install
```

–†–µ–∫–æ–º–µ–Ω–¥—É—é –¥–æ–±–∞–≤–∏—Ç—å —ç—Ç—É –∫–æ–º–∞–Ω–¥—É –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤. –≠—Ç–æ –≤—Å—ë,
—á—Ç–æ –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç —Å–¥–µ–ª–∞—Ç—å –≤–∞—à–∏–º –∫–æ–ª–ª–µ–≥–∞–º, —á—Ç–æ–±—ã —Ö—É–∫–∏ –∑–∞—Ä–∞–±–æ—Ç–∞–ª–∏ –∏ —É –Ω–∏—Ö —Ç–æ–∂–µ.

–ú–æ–∂–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `pre-commit` –∑–∞–º–µ–Ω–∏–ª –Ω–∞—à —Å—Ç–∞—Ä—ã–π —Ö—É–∫ –Ω–∞ —Å–≤–æ–π:

```sh
$ cat .git/hooks/pre-commit
#!/usr/bin/env python3.8
# File generated by pre-commit: https://pre-commit.com
...
```

–ü—Ä–∏ —ç—Ç–æ–º —Å—Ç–∞—Ä—ã–π —Ö—É–∫ –±—ã–ª –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω –≤ `pre-commit.legacy`.
–£–º–Ω—ã–π `pre-commit` –±—É–¥–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å –∏ –µ–≥–æ —Ç–æ–∂–µ, —á—Ç–æ–±—ã –Ω–µ —Å–ª–æ–º–∞—Ç—å —Ç–µ–∫—É—â–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ.
–ï—Å–ª–∏ —ç—Ç–æ –Ω–µ –∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ, —Ç–æ –ø—Ä–æ—â–µ –≤—Å–µ–≥–æ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç —Å—Ç–∞—Ä—ã–π —Ñ–∞–π–ª:

```sh
$ rm .git/hooks/pre-commit.legacy
```

–ü—Ä–æ–≤–µ—Ä–∏–º, —á—Ç–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª –≤–∞–ª–∏–¥–µ–Ω, –∞ –∑–∞–æ–¥–Ω–æ –∏ —á—Ç–æ –≤—Å—ë –Ω—ã–Ω–µ—à–Ω–µ–µ
—Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è–µ—Ç –æ–ø–∏—Å–∞–Ω–Ω—ã–º–∏ –ø—Ä–∞–≤–∏–ª–∞–º:

```sh
$ pre-commit run --all-files
```

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ `pre-commit` —Å–∫–∞—á–∞–µ—Ç –∏ –∑–∞–∫—ç—à–∏—Ä—É–µ—Ç –≤—Å–µ —Ñ–∞–π–ª—ã, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ
–¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä–æ–∫. –î–ª—è –ø—Ä–æ–≤–µ—Ä–æ–∫, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞–ø–∏—Å–∞–Ω—ã –Ω–∞ Python,
–±—É–¥—É—Ç —Å–æ–∑–¥–∞–Ω—ã –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è, —Ç–∞–∫ —á—Ç–æ –æ–Ω–∏ –Ω–∏–∫–∞–∫ –Ω–µ
–±—É–¥—É—Ç –∑–∞–≤–∏—Å–µ—Ç—å –æ—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞. –ü–µ—Ä–≤—ã–π —Ä–∞–∑ –∏–∑-–∑–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —ç—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è —Å–µ–∫—É–Ω–¥ 30 (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏
–∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞), –Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –µ—ë –µ—â—ë —Ä–∞–∑ –∏ –æ–Ω–∞ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è –∑–∞ —Å–µ–∫—É–Ω–¥—É.

–í–æ–∑–º–æ–∂–Ω–æ, `pre-commit` –Ω–∞–π–¥—ë—Ç –ø—Ä–æ–±–ª–µ–º—ã –∏–ª–∏ –¥–∞–∂–µ –∏—Å–ø—Ä–∞–≤–∏—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Ñ–∞–π–ª—ã.

–ï—Å–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç—Ä–∞–±–æ—Ç–∞–ª–∞ –±–µ–∑ –æ—à–∏–±–æ–∫, —Ç–æ –∫–æ–Ω—Ñ–∏–≥ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ Git:

```sh
$ git add .pre-commit-config.yaml
$ git commit -m ‚ÄúAdd pre-commit configuration‚Äù
```


## –ü–ª–∞–≥–∏–Ω—ã/–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–æ–∫

–ò–∑-–∑–∞ —Ç–æ–≥–æ, —á—Ç–æ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–æ–∫, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã—Ö –Ω–∞ Python, —Å–æ–∑–¥–∞—é—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–µ
–≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è, –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ —Å–æ–≤—Å–µ–º –ø–æ–Ω—è—Ç–Ω–æ, –∫–∞–∫ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å
–ø–ª–∞–≥–∏–Ω—ã –¥–ª—è —Ç–∞–∫–∏—Ö –ø—Ä–æ–≥—Ä–∞–º–º, –∫–∞–∫, –Ω–∞–ø—Ä–∏–º–µ—Ä, `flake8`.
–î–ª—è `flake8` –≤–∞–∂–Ω–æ, —á—Ç–æ–±—ã –≤—Å–µ –µ–≥–æ –ø–ª–∞–≥–∏–Ω—ã –±—ã–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã —Å –Ω–∏–º –≤ –æ–¥–Ω–æ
–≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ, –∏–Ω–∞—á–µ –æ–Ω –ø—Ä–æ—Å—Ç–æ –Ω–µ —Å–º–æ–∂–µ—Ç –∏—Ö –Ω–∞–π—Ç–∏.
–°–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è —ç—Ç–æ–≥–æ —É `pre-commit` –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
`additional_dependencies`, –∫–æ—Ç–æ—Ä–∞—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–æ—Ç —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º:

```yaml
  - repo: 'https://gitlab.com/pycqa/flake8'
    rev: 3.8.2
    hooks:
      - id: flake8
        additional_dependencies:
          - flake8-bugbear
```

–ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –∑–∞–ø—É—Å–∫–µ `pre-commit` –æ–±–Ω–∞—Ä—É–∂–∏—Ç –Ω–æ–≤—É—é –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç –µ—ë
–≤ —Ç–æ –∂–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ, —á—Ç–æ –∏ `flake8`. –¢–µ–ø–µ—Ä—å –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º –±—É–¥–µ—Ç
–≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –Ω–µ –ø—Ä–æ—Å—Ç–æ –≥–æ–ª—ã–π `flake8`, –Ω–æ –µ—â—ë –∏ —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º –ø–ª–∞–≥–∏–Ω–æ–º.
–¢–∞–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–∫–æ–ª—å–∫–æ —É–≥–æ–¥–Ω–æ.


## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –≤–æ–æ–±—â–µ –∑–∞–±—ã—Ç—å –ø—Ä–æ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ `pre-commit` –∏ –ø—Ä–æ—Å—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è
Git –∫–∞–∫ –æ–±—ã—á–Ω–æ, –∞ `pre-commit` –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –≤—Å–µ –æ–ø–∏—Å–∞–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏, –∏–∑—Ä–µ–¥–∫–∞
–±–µ—Å–ø–æ–∫–æ—è –≤–∞—Å –ø—Ä–µ—Ä–≤–∞–Ω–Ω—ã–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏, –µ—Å–ª–∏ –±—É–¥—É—Ç –Ω–∞–π–¥–µ–Ω—ã –∫–∞–∫–∏–µ-–Ω–∏–±—É–¥—å –ø—Ä–æ–±–ª–µ–º—ã.
–î–∞–≤–∞–π—Ç–µ —Å–Ω–æ–≤–∞ –ø–æ–ø—Ä–æ–±—É–µ–º –∑–∞–∫–æ–º–º–∏—Ç–∏—Ç—å —Ç–æ—Ç —Å–ª–æ–º–∞–Ω–Ω—ã–π —Ñ–∞–π–ª —Å –ø—Ä–æ–±–µ–ª–∞–º–∏ –∏ –∫–∞–≤—ã—á–∫–∞–º–∏:

```sh
$ git add example.py
$ git commit -v
Fix End of Files..................................Passed
Check for added large files.......................Passed
Check for byte-order marker.......................Passed
Detect Private Key................................Passed
Check python ast..................................Passed
flake8............................................Failed
- hook id: flake8
- exit code: 1
example.py:1:7: E201 whitespace after '('
example.py:1:22: E202 whitespace before ')'
black.............................................Failed
- hook id: black
- files were modified by this hook
reformatted example.py
All done! ‚ú® üç∞ ‚ú®
1 file reformatted.
```

–û–∂–∏–¥–∞–µ–º–æ, –æ–ø–µ—Ä–∞—Ü–∏—è –ø—Ä–µ—Ä–≤–∞–ª–∞—Å—å, –Ω–æ –≤ —ç—Ç–æ—Ç —Ä–∞–∑ –º—ã –ø–æ–ª—É—á–∏–ª–∏ –≤—Å–µ –Ω—É–∂–Ω—ã–µ
—Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, —Ñ–∞–π–ª –¥–∞–∂–µ –±—ã–ª –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω
–ø—Ä–∏ –ø–æ–º–æ—â–∏ `black`, —Ç–∞–∫ —á—Ç–æ –Ω–∏—á–µ–≥–æ –¥–∞–∂–µ –≤—Ä—É—á–Ω—É—é –¥–µ–ª–∞—Ç—å –Ω–µ –Ω—É–∂–Ω–æ.
–ü—Ä–æ—Å—Ç–æ –µ—â—ë —Ä–∞–∑ –∑–∞–ø—É—Å–∫–∞–µ–º —Ç–µ –∂–µ –∫–æ–º–∞–Ω–¥—ã, –∏ –≤ —ç—Ç–æ—Ç —Ä–∞–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–π—Ç–∏.

–ù–∞ YAML –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–º–Ω–æ–≥–æ –ø—Ä–∏—è—Ç–Ω–µ–µ, —á–µ–º –Ω–∞ `bash`! –î–∞, —á–µ—Å—Ç–Ω–æ –≥–æ–≤–æ—Ä—è,
–ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω–∞ —á—ë–º —É–≥–æ–¥–Ω–æ –ø–∏—Å–∞—Ç—å –ø—Ä–∏—è—Ç–Ω–µ–µ, —á–µ–º –Ω–∞ `bash`.


# –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã `pre-commit`

–ú–Ω–µ –ø—Ä–æ—â–µ –≤—Å–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–µ –Ω–∞ –∑–Ω–∞–∫–æ–º–æ–º –º–Ω–µ —è–∑—ã–∫–µ,
–Ω–æ –≤–æ–æ–±—â–µ `pre-commit` –¥–∞–ª–µ–∫–æ –Ω–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∏ –∏–º–µ–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ
–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤. –ï—Å–ª–∏ –≤—ã –ø–∏—à–µ—Ç–µ –Ω–µ –Ω–∞ Python, —Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤–∞–º –±—É–¥—É—Ç –±–ª–∏–∂–µ –¥—Ä—É–≥–∏–µ
–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã, —Ö–æ—Ç—è –≤—Å–µ –æ–Ω–∏ –∏–º–µ—é—Ç –ø—Ä–∏–º–µ—Ä–Ω–æ —Å—Ö–æ–∂–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:

* [`husky` –Ω–∞ JS](https://github.com/typicode/husky);
* [`lefthook` –Ω–∞ Go](https://github.com/Arkweid/lefthook);
* [`overcommit` –Ω–∞ Ruby](https://github.com/sds/overcommit).

–í–æ–∑–º–æ–∂–Ω–æ, –≤—ã —Ç–∞–∫–∂–µ –Ω–∞–π–¥–µ—Ç–µ –¥–ª—è —Å–µ–±—è —á—Ç–æ-—Ç–æ –ø–æ–ª–µ–∑–Ω–æ–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
[‚ÄúAwesome Git hooks‚Äù](https://github.com/aitemr/awesome-git-hooks).

# –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–Ø –≤—Å–µ–≥–¥–∞ —Å—Ç–∞—Ä–∞—é—Å—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Git-—Ö—É–∫–∏ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –≤—Å–µ—Ö –±—ã—Å—Ç—Ä—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫.
–≠—Ç–æ –Ω–µ –¥–∞–µ—Ç –º–Ω–µ –∑–∞–±—ã–≤–∞—Ç—å –æ –ø—Ä–æ–≤–µ—Ä–∫–∞—Ö, –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –±—ã—Å—Ç—Ä–µ–µ –ø–æ–ª—É—á–∞—Ç—å –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å.

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ —Å–∏—Ç—É–∞—Ü–∏—é, –∫–æ–≥–¥–∞ —Å–∏–¥–∏—à—å –∏ –∂–¥—ë—à—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø—Ä–æ–≤–µ—Ä–æ–∫ –æ—Ç CI,
–∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–æ–ª–≥–∏–º–∏
(–Ω–∞ –ø—Ä–æ–µ–∫—Ç–µ, –≥–¥–µ —è —Å–µ–π—á–∞—Å —Ä–∞–±–æ—Ç–∞—é, —Ç–µ—Å—Ç—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è 8-10 –º–∏–Ω—É—Ç),
–≤–∏–¥–∏—à—å –∫—Ä–∞—Å–Ω—ã–π –∫—Ä–µ—Å—Ç–∏–∫, –∏–¥—ë—à—å –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å, —á—Ç–æ –∂–µ —Ç–∞–º —Å–ª–æ–º–∞–ª–æ—Å—å,
–∞ —Ç–∞–º –≤—Å—ë _–ø–æ—á—Ç–∏_ –æ—Ç–ª–∏—á–Ω–æ ‚Äî —Ç–µ—Å—Ç—ã –ø—Ä–æ—à–ª–∏, –Ω–æ —Ç–æ–ª—å–∫–æ `flake8` –Ω–∞—à—ë–ª –ª–∏—à–Ω–∏–π –ø—Ä–æ–±–µ–ª.
–ß–∏–Ω–∏—à—å –ª–∏—à–Ω–∏–π –ø—Ä–æ–±–µ–ª –∏ —Å–Ω–æ–≤–∞ –∂–¥—ë—à—å 10 –º–∏–Ω—É—Ç, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Å–≤–æ—é –∑–µ–ª—ë–Ω—É—é –≥–∞–ª–æ—á–∫—É.
–î–∞–∫ –≤–æ—Ç —Ö—É–∫–∏ —Å–ø–∞—Å–∞—é—Ç –æ—Ç —Ç–∞–∫–∏—Ö —Å–∏—Ç—É–∞—Ü–∏–π, –ø–æ—Ç–æ–º—É —á—Ç–æ –≤—Å–µ —Ç—Ä–∏–≤–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
–æ–±–Ω–∞—Ä—É–∂–∏–≤–∞—é—Ç—Å—è –∑–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥ –ª–æ–∫–∞–ª—å–Ω–æ –Ω–∞ –º–æ–µ–π –º–∞—à–∏–Ω–µ –∏
–Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–æ–ø–∞–¥–∞—é—Ç –≤ –∏—Å—Ç–æ—Ä–∏—é Git.

–ù–∞—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É—é –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è Git-—Ö—É–∫–∞–º–∏. –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –≤–∞–º –Ω–µ —Ç—Ä–∞—Ç–∏—Ç—å
–≤—Ä–µ–º—è –Ω–∞ –µ—Ä—É–Ω–¥—É, –∏ –≤ –∏—Ç–æ–≥–µ –±—ã—Ç—å –±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–º –∏ –¥–æ–≤–æ–ª—å–Ω—ã–º —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–º.

–ü—Ä–∏–º–µ—Ä—ã –∏–∑ –ø–æ—Å—Ç–∞ –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏
[–∑–¥–µ—Å—å](https://github.com/and-semakin/git_hooks_example).

> –ï—Å–ª–∏ –ø–æ–Ω—Ä–∞–≤–∏–ª–∞—Å—å —Å—Ç–∞—Ç—å—è, —Ç–æ
[–ø–æ–¥–ø–∏—à–∏—Ç–µ—Å—å –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è]({filename}../pages/subscribe.md)
–æ –Ω–æ–≤—ã—Ö –ø–æ—Å—Ç–∞—Ö –≤ –±–ª–æ–≥–µ, —á—Ç–æ–±—ã –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å!

# –°—Å—ã–ª–∫–∏

* [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è `pre-commit`](https://pre-commit.com/);
* [—Ä–µ–µ—Å—Ç—Ä —Ö—É–∫–æ–≤ –¥–ª—è `pre-commit`](https://pre-commit.com/hooks.html);
* [—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π `pre-commit` –Ω–∞ GitHub](https://github.com/pre-commit/pre-commit);
* [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Git –ø—Ä–æ —Ö—É–∫–∏](https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks).
